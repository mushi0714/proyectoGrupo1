<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Becas (SGB)</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <nav id="navbar" class="hidden">
        <div class="nav-content">
            <h2 id="user-role-display">SGB</h2>
            <button onclick="app.logout()" class="btn-danger">Cerrar Sesión</button>
        </div>
    </nav>

    <div class="container">
        <section id="auth-section">
            <div class="auth-box">
                <h1>Gestión de Becas</h1>
                <div id="login-form">
                    <h2>Iniciar Sesión</h2>
                    <input type="email" id="login-email" placeholder="Correo electrónico">
                    <input type="password" id="login-pass" placeholder="Contraseña">
                    <button onclick="app.login()">Ingresar</button>
                    <p>¿No tienes cuenta? <a href="#" onclick="app.toggleAuth('register')">Regístrate aquí</a></p>
                </div>

                <div id="register-form" class="hidden">
                    <h2>Registro de Postulante</h2>
                    <input type="text" id="reg-name" placeholder="Nombre completo">
                    <input type="email" id="reg-email" placeholder="Correo electrónico">
                    <input type="password" id="reg-pass" placeholder="Contraseña">
                    <button onclick="app.register()">Registrarse</button>
                    <p>¿Ya tienes cuenta? <a href="#" onclick="app.toggleAuth('login')">Inicia sesión</a></p>
                </div>
            </div>
        </section>

        <section id="admin-dashboard" class="hidden dashboard">
            <h2>Panel de Administración</h2>
            
            <div class="card">
                <h3>Crear Nueva Convocatoria</h3>
                <form id="create-scholarship-form">
                    <input type="text" id="beca-name" placeholder="Nombre de la Beca" required>
                    <textarea id="beca-desc" placeholder="Descripción" required></textarea>
                    <select id="beca-type">
                        <option value="Económica">Económica</option>
                        <option value="Académica">Académica</option>
                        <option value="Social">Social</option>
                    </select>
                    <div class="row">
                        <label>Inicio: <input type="date" id="beca-start" required></label>
                        <label>Cierre: <input type="date" id="beca-end" required></label>
                    </div>
                    <textarea id="beca-reqs" placeholder="Requisitos (separados por coma)" required></textarea>
                    <button type="button" onclick="app.createScholarship()">Publicar Convocatoria</button>
                </form>
            </div>

            <div class="card">
                <h3>Convocatorias Existentes</h3>
                <div id="admin-scholarships-list" class="list-group"></div>
            </div>

            <div class="card">
                <h3>Reportes Globales</h3>
                <div id="admin-reports"></div>
            </div>
        </section>

        <section id="evaluator-dashboard" class="hidden dashboard">
            <h2>Panel de Evaluación</h2>
            <div class="card">
                <h3>Solicitudes Pendientes</h3>
                <div id="evaluator-tasks-list" class="list-group"></div>
            </div>
            
            <div id="evaluation-modal" class="hidden modal-overlay">
                <div class="modal-content">
                    <h3>Evaluar Solicitud</h3>
                    <div id="modal-applicant-info"></div>
                    <hr>
                    <label>Situación Económica (0-40): <input type="number" id="score-eco" max="40"></label>
                    <label>Rendimiento Académico (0-30): <input type="number" id="score-acad" max="30"></label>
                    <label>Contexto Social (0-30): <input type="number" id="score-social" max="30"></label>
                    <textarea id="score-obs" placeholder="Observaciones del evaluador"></textarea>
                    <div class="modal-actions">
                        <button onclick="app.submitEvaluation('Aprobada')" class="btn-success">Aprobar</button>
                        <button onclick="app.submitEvaluation('Rechazada')" class="btn-danger">Rechazar</button>
                        <button onclick="app.closeModal()" class="btn-secondary">Cancelar</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="applicant-dashboard" class="hidden dashboard">
            <h2>Panel del Postulante</h2>
            
            <div class="tabs">
                <button onclick="app.switchTab('available')" class="active">Becas Disponibles</button>
                <button onclick="app.switchTab('history')">Mi Historial</button>
            </div>

            <div id="tab-available" class="tab-content">
                <div id="available-scholarships-list" class="grid-container"></div>
            </div>

            <div id="tab-history" class="tab-content hidden">
                <div id="my-applications-list" class="list-group"></div>
            </div>

            <div id="application-modal" class="hidden modal-overlay">
                <div class="modal-content">
                    <h3>Formulario de Postulación</h3>
                    <p id="target-beca-title"></p>
                    <form id="apply-form">
                        <select id="app-level" required>
                            <option value="">Nivel Educativo</option>
                            <option value="Secundaria">Secundaria</option>
                            <option value="Universitario">Universitario</option>
                            <option value="Postgrado">Postgrado</option>
                        </select>
                        <select id="app-income" required>
                            <option value="">Situación Socioeconómica (Ingresos)</option>
                            <option value="Bajo">Bajo (< salario min)</option>
                            <option value="Medio">Medio</option>
                            <option value="Alto">Alto</option>
                        </select>
                        <textarea id="app-reason" placeholder="Motivo de la solicitud" required></textarea>
                        
                        <input type="number" id="app-age" placeholder="Edad (Validación auto)" required>

                        <div class="modal-actions">
                            <button type="button" onclick="app.submitApplication()" class="btn-primary">Enviar Solicitud</button>
                            <button type="button" onclick="app.closeModal()" class="btn-secondary">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>